# Run full integration tests before pushing
# This catches issues that schema validation alone can't

echo "ðŸš€ Running pre-push checks..."

# Get commits that will be pushed (not yet on remote)
COMMITS=$(git log @{u}.. --oneline 2>/dev/null || git log HEAD~5.. --oneline)

if [ -z "$COMMITS" ]; then
  echo "âœ… No new commits to push"
  exit 0
fi

echo "ðŸ“¦ Commits being pushed:"
echo "$COMMITS" | head -5
echo ""

# Run full tests for changed apps
./tests/test-changed.sh --committed
